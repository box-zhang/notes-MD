[TOC]

#2019年春-非题库-《高级操作系统知识点》

##一. 分布式系统特征 

###- 什么叫分布式系统？举例说明现实生活中的分布式系统，阐述系统组成部分与功能特点

> 【暮光春晓 - 课件 + 百度】
>
> **分布式系统**是一个硬件或软件组件分布在连网的计算机上，组件之间通过消息传递进行通信和动作协调的系统。
>
> *（概念理解：在一个分布式系统中，一组独立的计算机展现给用户的是一个统一的整体，对用户来说，就好像是一个系统似的。系统中存在一个以全局的方式管理计算机资源的分布式操作系统。在操作系统之上有一层软件中间件（middleware）负责实现这个模型。一个著名的分布式系统的例子是万维网（World Wide Web），在万维网中，所有的一切看起来就好像是一个文档（Web页面）一样。通过资源共享实现高灵活和低代价的资源共享。）*
>
> 举例：google。
>
> web搜索的组成：
>
> - 一个底层物理设施
> - 由上万台主机联网支撑起来的数据中心（对于用户来说是感受不到这些主机存在的，只是看到了一个系统在运作）
>
> 特点：
>
> - 一个底层物理设施，结点通常是台式机，静态、分立和自治的超大规模数据中心；
> - 一个分布式文件系统，支持超大文件，并根据搜索和其他应用的使用方式进行了深度优化；
> - 一个相关的结构化分布式存储系统，它提供对超大数据集的快速访问；
> - 一个锁服务，它提供诸如分布式加锁和协定等分布式系统功能；
> - 一个编程模式，它支持对底层物理基础设施上的超大并行和分布式计算的管理。

###- 分布式系统的特征是什么？

> 【暮光春晓 - 课件 + 百度】
>
> - 并发性：
>   - 用户可以在各自的计算机上工作，在必要时共享文件等资源，而系统处理共享资源的能力会随着网络资源的增加而提高。所以，对共享资源的并发执行程序的协调是极其重要的。
> - 缺乏全局时钟：
>   - 密切地协作（也就是密切的信息交换来协调程序所需动作）取决于对程序动作发生时间的共识，但实际网络上计算机同步时钟的准确性受到极大的限制，即没有一个正确时间的全局概念，只能通过本地时钟交换消息；
>   - 不可预测的消息延迟限制了准确性，这是通过网络发送消息带来的直接后果。
> - 故障独立性：
>   - 分布式系统的所有组件都可能独立的出现故障（例如：网络、计算机、存储、软件），且故障或程序中的异常不能马上被与之通讯的其他组件感知；
>   - 系统设计者需要为可能的故障设计结果。

###给出能被共享的 5 种类型的硬件资源和 5 种类型的数据或软件资源。给出它们在实际的分布式系统中发生共享的例子

> 【高级操作系统（第五版）+ 课件】
>
> 硬件资源（它们连接网络的能力，使得移动计算成为可能）：
>
> - 笔记本电脑
> - 手持设备：例：移动电话、传呼机、GPS设备、数码相机、
> - 可穿戴设备：例：智能手表
> - 嵌入式家电设备：例：洗衣机、电视、汽车、打印机（用户可以通过无线LAN或以太网链接从笔记本电脑上的，把文件发送到同一台打印机） 
> - 存储设备：硬盘、内存
>
> 数据或软件资源：
>
> - 网络播放：分布式的多媒体技术，在互联网上广播连续媒体的能力，例如：照片、音乐、视频等 
> - 云通讯：微信、邮件、 
> - 云计算类的软件：以共享数据库或web页面集方式出现的共享资源，通过快速、相关度高的搜索服务，实现整合搜索，让不同用户通过关键词可以搜索到同样的资源信息。例：谷歌、web搜索、阿里淘宝、亚马逊等提供服务访问复杂的数据中心给用户
> - 娱乐相关：在线游戏

###在分布式系统中，常常说，“避免性能瓶颈”。可否举例说明并谈谈你的观点。  

> 算法应该是分散的，以避免性能瓶颈。比如域名服务器，以前将名字表保存在一个文件之中，当域名不断增加时，这变成一个性能瓶颈；现在将名字表分区，分散到互联网的服务器上并本地管理，从而解决这个瓶颈。
>
> "避免性能瓶颈"与分布式系统挑战中的可伸缩性相关，在于节点间通讯带来的网络开销，比如说当服务器的一些共享资源被频繁的访问时，会引起网络性能的下降。可以通过分散型算法、复制数据、缓存和部署多个服务器的方式来提高频繁使用的资源性能，从而使类似的任务能并发的完成。
>
> 例如：将许多用户访问的网页，复制到互联网上多个服务器上（CDS），用户可以访问离自己近的服务器。也可以将经常访问的网页缓存在本地的服务上。
>
> 例如：双11大型促销活动
>
> 双11促销活动带来的是流量暴涨，在高访问量的冲击下，电商系统会受到以下挑战: 
>
> - 瞬间访问量可能是平时的几十倍
>
> - 网络带宽被占满，用户响应很慢
> - 机器负载高甚至宕机
> - 数据库压力过大导致服务不可用  
>
> 此时需要思考的问题是：如何设计电商峰值系统来更好地满足用户蜂拥而至的访问，如何在海量数据处理中实时发现有效信息并转化为商机。
>
> 解决这一问题的核心思路：采用分而治之的思想，大系统小做，小系统大做。做到：快、稳、炫。 

###- 在故障处理(Failure handling)中，什么叫容错？什么叫冗余？

> 【暮光春晓 - 百度】
>
> **容错**：
>
> 容错是用冗余的资源使计算机具有容忍故障的能力，即在产生故障的情况下，仍有能力将指定的算法继续完成，以增加资源的办法换取可靠性。
>
> 容错技术是指在一定程度上容忍故障的技术，也称为故障掩盖技术（fault masking）。采用容错技术的系统称容错系统。
>
> **冗余**：
>
> 服务可以利用冗余的组件实现容错，指重复配置系统的一些部件，当系统发生故障时，冗余配置的部件介入并承担故障部件的工作，由此减少系统的故障时间。通常指通过多重备份来增加系统的可靠性。
>
> 例如：
>
> - 在互联网的任何两个路由器之间，至少应该存在两个不同的路由
> - 在域名系统中，每个名字表至少被复制到两个不同的服务器上
> - 据库可以被复制到几个服务器上，保证任何一个服务器出故障后，数据仍可访问

###现今分布式操作系统的挑战有：异构性、开放性、安全性、可伸缩性、故障处理、并发性、透明性等。分别给出挑战的定义，举例与详细分析挑战涉及的关键技术。 

> 【暮光春晓 + 百度 + 高级操作系统（第五版）】
>
> 1. **异构性**（即存在多样性和差别）。
>
> 【定义】一个软件层，提供了一个编程抽象以及对低层网络、硬件、OS和编程语言异构性的屏蔽。互联网使用户能在大量异构计算机和网络上访问服务和运行应用程序
>
> 【举例】网络、计算机硬件、操作系统、编程语言、由不同的开发者完成的软件实现
>
> 【挑战所涉及的技术】
>
>    - 网络的异构通过互联网协议相互通信而被屏蔽；
>    - 分布式系统由于基于不同的网络、操作系统、计算机硬件和编程语言来构造，必须要考虑一种通用的网络通信协议来屏蔽异构系统之间的差异。一般交由中间件来处理这些差异。
>    - 虚拟机也是使代码到处运行的一种方法。
>
> 2. **开放性**。
>
> 【定义】它取决于新的资源共享服务能被增加和供多种客户程序使用的程度。也就是要获得发布系统的关键接口，使其基于一致的通信机制，开放性决定系统是否能以各种不同的方式扩展和重现。
>
> 【举例】万维网联盟开发和发布了与web工作相关的标准
>
> 【挑战所涉及的技术】
>
>    - 设计者所面临的挑战是解决由不同人够早的由许多组件组成的分布式系统的复杂性
>    - 要保证关键接口的可扩展性，最终使应用程序能共享资源
>
> 3. **安全性**。
>
> 【定义】信息资源安全性包括：机密性（防止泄露给未授权的个人）、完整性（防止被改变或被破坏）、可用性（防止对访问资源的手段的干扰）、鉴定（远程用户或代理可靠性和正确性鉴定）。
>
> 【举例】电子商务或电子银行中，用户在互联网上发送信用卡号码、JP摩根被黑事件
>
> 【挑战所涉及的技术】
>
>    - 拒绝服务攻击：（例如：用大量无意义的请求攻击服务，使重要的用户不能使用它）
>    - 移动代码的安全性：（例如：用户接到一个邮件附件，可能看似显示了一幅画，但实可能在访问本地资源，或可能是拒绝服务攻击的一部分）
>
> 4. **可伸缩性**。
>
> 【定义】如果随着资源数量的增加和用户访问的增加，系统仍然能保持其有效性，该系统就被称为可伸缩的。
>
> 【举例】互联网的增长：计算机和web服务
>
> 【挑战所涉及的技术】
>
>    - 控制物理资源的开销
>    - 控制性能损失
>    - 防止软件资源用尽
>    - 避免性能瓶颈四大挑战
>
> 5. **故障处理**。
>
> 【定义】分布式系统的故障是部分的，硬件或软件都会出现未知的故障或者不正常运行，有时，有些组件出了故障而有些组件运行正常，因此故障处理是贯穿整个系统的难题。
>
> 【举例】
>
> 【挑战所涉及的技术】
>
>    - 检测故障
>    - 掩盖故障
>    - 容错（设计容错机制如重传）
>    - 故障恢复（数据恢复或“回滚”保证一致性）
>    - 冗余（多条路由或者备份等技术）
>
> 6. **并发性**。 
>
> 【定义】分布式系统中，服务和应用均提供可被客户共享的资源，因此，可能有几个客户同时试图访问一个共享资源的情况。
>
> 【举例】双十一凌晨时，记录订单的数据结构被非常频繁的访问
>
> 【挑战所涉及的技术】
>
>    - 一个共享资源同时可以被多个服务器访问
>    - 处理用户需求序列方法限制了吞吐量
>    - 确保共享资源在并发环境中的正确操作
>
> 7. **透明性**。 
>
> 【定义】对用户和应用程序员屏蔽分布式系统的组件的分离性，使系统被认为是一个整体，而不是独立组件的集合。（分布式系统中任何组件的故障、或者主机的升级、迁移对于用户来说都是透明的，不可见的。）
>
> 【举例】程序员不需要关心特定应用的位置或操作如何被其他组件访问等细节问题，或是他是否被复制或迁移。
>
> 【挑战所涉及的技术】
>
>       1. 访问透明性：用相同的操作访问本地资源和远程资源（电子邮件）
>       2. 位置透明性：不需要知道资源的物理位置或网络位置（电子邮件、URL）
>       3. 并发透明性：几个进程能并发的使用共享资源而不互相干扰
>       4. 复制透明性：使用资源的多个实例提升可靠性和性能，而用户和程序员无需知         道副本的相关信息
>       5. 故障透明性：屏蔽错误
>       6. 移动透明性：资源和客户能够在系统内移动而不受影响（移动电话）
>       7. 性能透明性：负载变化时，系统能够被重新配置以提高性能
>       8. 伸缩透明性：系统和应用能够进行扩展而不改变系统结构和应用算法
>    9. **服务质量**
>
> 【定义】影响客户和用户体验的服务质量是可靠性、安全性和性能。
>
> 【举例】与性能、安全性和可靠性相关的参数
>
> 【挑战所涉及的技术】
>
>    - 提供与服务访问相关的质量保障

###- 什么是大数据

> 【课件】
>
> - 数据体量巨大，从TB级跃升到PB级
> - 数据类型繁多（网络日志、视频、图片、地理位置信息等）
> - 价值密度低、商业价值高（以视频为例，连续不间断监控过程中，可能有用的数据仅仅有一两秒）
> - 处理速度快

##二. 系统模型 

###分布式系统模型设计时，设计者常常面对的分布式系统的困难与威胁问题有哪些？

> 【课件-Chapter2】
>
> 1. 使用模式的多样性：
>    - 系统组件承受各种工作负载。例：Web每天有几百万的访问量
>    - 系统断线或连接不稳定。例：系统中包括移动计算机
>    - 系统对带宽与延迟的特殊要求。例：多媒体应用
>
> 2. 系统环境的多样性：
>    - 容纳异构硬件、操作系统和网络。
>    - 网络在性能上有很大的不同。例：无线网的速度只达到局域网的几分之一
>    - 支持不同规模的系统。例：从几十台计算机到几百万台计算机
>
> 3. 内部问题：
>    - 非同步时钟
>    -  冲突的数据更新
>    - 系统组件的软硬件故障
>
> 4. 外部问题：
>    - 数据完整性
>    - 保密性的攻击
>    - 服务拒绝攻击

###分布式系统体系结构元素包括：通信实体、通信范型、角色和责任、放置，以客户-服务器系统体系结构为例解释相应元素概念

> 【课件-Chapter2】
>
> **通信实体** - 客户端与服务器端的通信（对象，组件，web服务），底层进程间的通信。
>
> **通信范型** - 分布式系统中实体如何通信。客户-服务器结构中最常见的通信范型是远程调用，如用于支持客户-服务器计算的请求-应答协议是一个有效的模式。
>
> **角色和责任** - 在客户-服务器结构中，进程扮演服务器和客户的角色。特别是，为了访问服务器管理的共享资源，客户进程可以与不同主机上的服务器进行交互。
>
> **放置** - 对象或服务这样的实体是怎样映射到底层的物理分布式基础设施上的，物理分布式基础设施由大量的机器组成，这些机器通过一个任意复杂的网络互联。从决定分布式系统特性的角度而言，放置是关键的，这些特性大多数与性能相关，也包括其他特性如可靠性和安全性。放置需要考虑实体间的通信模式、给定机器的可靠性和它们当前的负载、不同机器之间的通信质量等。
>
> 
>
> 客户-服务器系统体系结构
>
> ![image-20190528111022952](../../../../Library/Application Support/typora-user-images/image-20190528111022952.png)
>
> 

###什么叫层次化软件体系结构？举例说明

> 【高级操作系统（第五版）】
>
> 层次化体系结构和分层体系结构是互补的。分层将服务垂直组织称抽象层，而层次化是一项组织给定层功能的技术，他把这个功能放在合适的服务器上，或者作为第二选择放在物理节点上。
>
> 给定应用的功能分解，要包括：
>
> - 表示逻辑，涉及处理用户交互和修改呈现给用户的应用视图
> - 应用逻辑，涉及与应用相关的详细的应用特定处理
> - 数据逻辑，涉及应用的持久存储，通常在一个数据库管理系统中
>
> 例如：三层体系结构
>
> ![image-20190528165233764](../../../../Library/Application Support/typora-user-images/image-20190528165233764.png)
>
> 三层解决方案中，有
>
> 1. 从逻辑元素到物理服务器的一对一映射。例如：应用逻辑放在一个地方，提高软件的可维护性。
> 2. 每一层也都有定义明确的角色。例如：第三层金金是一个提供关系服务接口的数据库。
>
> 缺点：增加了管理三个服务器的复杂性，也增加了与每个操作相关的网络流量和延迟

###什么叫瘦客户？举例说明你的观点

> 【高级操作系统（第五版）】
>
> **瘦客户**是指一个软件层，在执行一个应用程序或访问远程计算机上的服务时，由该软件层提供一个基于窗口的本地用户界面。
>
> 例如：一个瘦客户在访问互联网上的一台计算机服务器
>
> ![image-20190528171217518](../../../../Library/Application Support/typora-user-images/image-20190528171217518.png)
>
> 好处：有可能通过大量的网络化服务和潜在能力极大的增加简单的本地设备
>
> 缺点：交互频繁的图形活动中，因为网络和操作系统的延迟，用户感受到的延迟会因为在瘦客户和应用进程之间传输图像和向量信息而增大到不可接受的程度。

###举例说明并图示异步分布式系统中，不同网络结点间进程的“事件的实时排序”。(参考图 2-13)  

> 【高级操作系统（第五版）】
>
> 异步分布式系统：许多分布式系统，例如互联网，是非常有用的，但他们不具备同步系统的资格。所以我们需要另一个模型——异步分布式系统。
>
> ![image-20190528175013318](../../../../Library/Application Support/typora-user-images/image-20190528175013318.png)
>
> 例：考虑下列邮件列表中一组电子邮件用户X、Y、Z、A之间的邮件交换：
>
> 1. 用户X发送主题为Meeting的消息
> 2. 用户Y和Z发送一个主题为Re:Meeting的消息进行回复
>
> 尽管缺乏精确的时钟，但系统的执行仍能用事件和他们的顺序来描述：
>
> 事件的逻辑实时排序（仅考虑X、Y事件）：
>
> X在Y接收到m1之前发送m1；
>
> Y在X接收到m2之前发送m2；
>
> Y在发送m2之前接收m1（应答再接收到消息后发出）；

###掌握分布式系统的设计实例，分布式系统的基础模型有哪些？分别可以解决哪些问题？

> 【高级操作系统（第五版）】
>
> 1. 物理模型（考虑组成系统的计算机和设备的类型以及他们的互连，不涉及特定的技术细节）
> 2. 体系结构模型（是从系统的计算机元素之行的计算和通信任务方面来描述系统）
> 3. 基础模型（采用抽象的观点描述大多数分布式系统面临的单个问题的解决方案）
>    - 交互模型 - 交互模型 处理分布式系统中性能以及设置时间限制的困难，例如对于消息传递。反映了进程交互的方式；
>    -  故障模型 - 故障模型 试图给出由进程和通信通道呈现出来的故障的一个精确的规格说明。它定义可靠的通信和正确的进程；
>    - 安全模型 - 安全模型 讨论对于进程和通信通道可能存在的威胁，它引入了安全通道的概念，以低于这些威胁。

（以下内容均为大琳琳提供）

##三. 进程间通信 

###线程与进程的区别？

> 【**进程**】 进程是具有独立功能的程序关于某个数据集合上的一次运行活动，是系统进行资源分配和调度的独立单位。一个进程由一个执行环境（即资源管理的基本单位）和一个或多个线程组成。
>
> （其实，进程就是一个程序的执行。）
>
> 进程的三个基本状态（不考）：运行态、就绪态、等待态。
>
> 【**进程控制快（PCB）**】：系统为了管理程序设置的一个专门的数据结构（例如：整型、字符串、地址标识等），用它来记录进程的外部特征，描述进程的运动变化过程。进程与CPB是一一对应的，系统利用PCB来控制和管理进程。
>
> 【**线程**】 是指进程内的一个执行单元，也是进程内的可调度实体。是CPU调度和分派的基本单位，它是比进程更小的能独立运行的基本单位。线程自己基本上不拥有系统资源， 只拥有一点在运行中必不可少的资源 (如程序计数器， 一组寄存器和栈)， 但是它可与同属一个进程的其他的线程共享进程所拥有的全部资源。 
>
> **进程和线程的区别** 
>
> 1）地址空间和其它资源（如打开文件）：进程间相互独立，同一进程的各线程间共享地址空间 ，而进程有自己独立的地址空间。某进程内的线程在其它进程不可见。
>
> 2）通信：[进程间通信](https://baike.baidu.com/item/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1)[IPC](https://baike.baidu.com/item/IPC)，线程间可以直接读写进程数据段（如全局变量）来进行通信——需要[进程同步](https://baike.baidu.com/item/%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5)和互斥手段的辅助，以保证数据的一致性。
>
> 3）调度和切换：线程上下文切换比进程上下文切换要快得多。
>
> 4）在多线程OS中，线程不是一个可执行的实体。

![image-20190701221148176](../../../../Library/Application Support/typora-user-images/image-20190701221148176.png)

###什么是进程、线程的并发控制与调度？什么是多线程并发控制？

> 【暮光春晓 + 百度】
>
> **【进程调度】** - 操作系统管理了系统有限资源，当有多个进程（或多个进程发出的请求）要使用这些资源时，因为资源有限性，必须按照一定的原则选择进程（请求）来占用资源，这就是调度。
>
> **【线程调度】** - 指按照特定机制为多个线程分配CPU的使用权。
>
> **【多线程并发控制】** -是指从软件或者硬件上实现多个线程并发执行的技术。具有多线程能力的计算机因有硬件支持而能够在同一时间执行多于一个线程，进而提升整体处理性能。（例如处理邮件，可以做到高并发处理）

###什么是进程间通信？什么是消息传递？给出定义并举例说明

> **【进程间通信】**：是分布式系统进程之间的通信协议的特征，在点对点进程间进行消息传递需要两个消息通信操作支持（送send：进程复制消息到远程系统的缓冲区。接收receive：进程复制消息从远程系统的缓冲区到 本地内存）。指进程间的信息交换，其所交换的信息量，少则只是一个状态或一个数值，多则可能是成千上万个字节。
>
> 进程间通信是在一个进程的一个套接字与另一个进程的一个套接字之间传递一个消息。
>
> 进程间通信特征：1.同步和异步通信；2.消息目的地；3.可靠性；4.排序
>
> 例：邮件收发系统
>
> ---
>
> **【消息传递】**：是进程通信的一种常用方法，适用范围广，可用于多核、SMP和分布式系统，由原语对“send(发送)和receive(接收)”提供主要功能：send（目的, 信息）receive（源, 信息）。他的实现形式有多种（例如："阻塞send，阻塞receive"、"无阻塞send，阻塞receive"、"无阻塞send，无阻塞receive"等）。
>
> 消息传递也就是进程交互的两个基本要求：同步&&互斥、通信
>
> 例：生产者／消费者问题。
>
> 问题描述：若干进程通过无限／有限的共享缓冲区交换数据
>
> - 一组生产者进程不断写入
> - 另一组"消费者"进程不断读出
> - 共享缓冲区无限／共有N个
> - 任何时刻智能有一个进程可对共享缓冲区进行操作

###什么是客户/服务器编程？

###如何进行客户端编程设计？

###如何进行服务器端编程设计？

###如何设计服务器与客户的通信？

###给出基于 Socket 的客户/服务器，面向 UDP 和 TCP 网络编程的详细说明，同时给出一个 UNIX/Linux 的 Client/Sever 的程序设计算法流程图。 

> Socket套接字，是进程间通信的端点。
>
> **【客户／服务器编程】**： 
>
> 服务器：有一个进程(或多个进程)在指定的 端口等待客户来连接，服务程序等待客户的连 接信息，一旦连接上之后，就可以按设计的数 据交换方法和格式进行数据传输。 
>
> 客户端：在需要的时刻发出向服务端的连接请 求。 
>
> **【客户端编程设计】**：
>
> 1. 使用socket调用得到一个socket描述符
> 2. 使用connect向指定的服务器上的指定端 口发起连接，一旦连接成功返回，就说明已经建立了与服务器的连接
> 3. 通过socket描述符进行读写操作。 
>
> **【服务器端编程设计】**：
>
> （首先启动服务器，过一些时间客户启动，并连接到服务器）
>
> 1. 使用socket调用得到一个描述符， 
> 2. 使用bind调用将一个名字与socket描述符 连接起来，对于Internet域就是将Internet地 址联编到socket。 
> 3. 服务端使用listen调用指出等待服务请求 队列的长度。 
> 4. 使用accept调用等待客户端发起连接，一 旦有客户端发出连接，accept返回客户的地 址信息，并返回一个新的socket描述符，该 描述符与原先的socket有相同的特性， 
> 5. 服务端使用新的socket进行读写操作。 
>
>  说明：一般服务端可能在accept返回后创建 一个新的进程进行与客户的通信，父进程则 再到accept调用处等待另一个连接。 
>
> **【服务器与客户的通信设计】**：
>
> - 客户不是和服务器建立连接，而是使用sendto系统调用向服务器发一个数据报，作为参数请求目的地址(服务器端)。
> -  服务器也不必接收来自客户的连接，而是发送系统调用recvfrom，等待来自客户的数据到达 。此系统调用返回客户进程的网络地址和数据报，服务器可向对方进程发出响应。
>
> **【基于 Socket 的客户/服务器，面向 UDP 和 TCP 网络编程的详细说明】**：
>
> - 创建一个socket， 
> - 调用recvfrom接收客户端的数据报， 
> - 调用sendto将要返回客户端的消息发送给客户进程。 
> - 客户端: 
> - 创建一个socket， 
> - 再使用sendto向服务端进程发出请求， 
> - 使用recvfrom得到返回的消息。 
>
> TCP(传输控制协议)：是面向连接的协议。为用户提供可靠的、全双工的字节流服务。
>
>  UDP(用户数据报协议)：一种无连接的协 议。不保证数据报一定能到达目的地。 
>
> UDP、TCP这两种形式的通信，都是用套接字（socket）抽象。
>
> ![image-20190702000236259](../../../../Library/Application Support/typora-user-images/image-20190702000236259.png)
>
> ![image-20190701234439529](../../../../Library/Application Support/typora-user-images/image-20190701234439529.png)

##四. 远程过程调用 （RPC）

###什么叫远程过程调用（RPC）？举例说明

> **【远程过程调用】**（RPC）：远程过程调用是一种进程间通信方式。指用户可以向调用本地过程一样调用不同地域的不同计算机上的过程，从而使得应用程序设计人员不必设计和开发有关发送和接收信息的实现细节。是分布式系统通信处理的事实标准，实现消息传输的透明性。
>
> （
>
> ​	对调用者透明：被调用过程是在远程机器上执行 
>
> ​	透明性是通过在客户端插入一个称为client stub，在服务器端插入一个称为server stub 完成的 
>
> ）
>
> 例：算机 A 上的进程，调用另外一台计算机 B 上的进程，其中 A 上的调用进程被挂起，而 B 上的被调用进程开始执行，当值返回给 A 时，A 进程继续执行。调用方可以通过使用参数将信息传送给被调用方，而后可以通过传回的结果得到信息。而这一过程，对于开发人员来说是透明的。

###描述远程过程调用( RPC) 的工作原理和 RPC 调用的步骤

> RPC 背后的思想是尽量使远程过程调用具有与本地调用相同的形式。
>
> RPC的基本思想
>
> (1984年,Birrell,Nelson)允许程序调用位于其他机器上的过程，当机器Ａ上的一个进程调用机器Ｂ上的过程时，在Ａ上调用进程被挂起，在Ｂ上执行被调用过程，过程所需的参数以消息的形式从调用进程传送到被调用过程，被调用过程处理的结果也以消息的形式返回给调用进程。而对程序员来说，根本没有看出消息传递过程和I/O处理过程，这种方式称为远程过程调用。
>
> 【远程过程调用 RPC 的工作原理】
>
> 通常，对于每个单独远程过程，都有一个存根。当客户调用远程过程时，RPC 系统调用适当存根，并且传递远程过程参数。这个存根定位服务器的端口，并且封装参数（打包参数），以便通过网络传输。然后，存根通过消息传递，向服务器发送一个消息。
>
> 服务器的类似存根收到这个消息，并且调用服务器的过程。如果必要，返回值可通过同样技术传回到客户机。
>
> ![image-20190702004409282](../../../../Library/Application Support/typora-user-images/image-20190702004409282.png)
>
> 远程过程RPC调用步骤 
>
> 1. 客户过程以正常的方式调用客户存根 
> 2. 客户存根生成一个消息，然后调用本地操作系统 
> 3. 客户端操作系统将消息发送给远程操作系统 
> 4. 远程操作系统将消息交给服务器存根 
> 5. 服务器存根将参数提取出来，然后调用 服务器 
> 6. 服务器执行要求的操作，操作完成后将结果 返回给服务器存根 
> 7. 服务器存根将结果打包成一个消息，然后调 用本地操作系统 
> 8. 服务器操作系统将含有结果的消息发送回客 户端操作系统 
> 9. 客户端操作系统将消息交给客户存根 
> 10. 客户存根将结果从消息中提取出来，返回给 调用它的客户过程 

### 什么是负载均衡？什么是透明性？什么是可视操作？

> 【负载均衡】：
>
> 负载均衡是分布式系统架构设计中必须考虑的因素之一。通常，进程分配策略包括从总是在产生进程的主机上运行还是在其他机器上运行，取决于本机结点的负载是轻还是重。而将进程从负载重的系统迁移到负载轻的系统，从而改善整体性能，这就叫做负载均衡。也就是，将请求/数据均匀分摊到多个操作单元上执行，负载均衡的关键在于均匀。
>
> 均衡负载能够平均分配客户请求到服务器列阵，籍此提供快速获取重要数据，解决大量并发访问服务问题。
>
> 【RPC透明性】：
>
> 客户－调用进程所在的机器。服务器－被调用过程所在的机器。
>
> 透明性是通过在客户端插入一个称为**clientstub**，在服务器端插入一个为**server stub**完成的。
>
> RPC透明性的思想使得远程过程调用尽可能象本地调用一样，即调用进程应该不知道被调用过程是在另一台计算机上执行，反过来也是如此，被调用过程也应该不知道是由哪台机器上的进程调用。使远程过程调用的语义与本地过程调用的语义相似，在语法上没差别。
>
> RPC透明性的实现：
>
> 客户代理(client stub)将参数封装成消息，请求内核将消息送给服务器，调用receive原语进入阻塞状态，当消息返回到客户时，内核找到客户进程，消息被复制到缓冲区，并且客户进程解除阻塞，客户代理检查消息，从中取出结果，并将结果复制给它的调用进程。
>
> 【可视操作】：
>
> 

###描述远程过程调用通信模型

> ![image-20190702003320497](../../../../Library/Application Support/typora-user-images/image-20190702003320497.png)
>
> ![image-20190703003207406](../../../../Library/Application Support/typora-user-images/image-20190703003207406.png)
>
> ![image-20190703003229206](../../../../Library/Application Support/typora-user-images/image-20190703003229206.png)
>
> **RPC**( **Remote Procedure Call** )是分布式 系统通信处理的事实标准**,**实现消息传输的透 明性。 
>
> • 常规过程调用
>  • 客户存根和服务器存根 
>
> • 参数传递 

###使用 socket 编程实现一个简单的远程过程调用流程设计，文件系统存放在远端服务器上，要求:
 1)客户端程序实现 put 功能(将一个文件从本地传到文件服务器) ; put [-h hostname] [-p portname] local_filename remote_filename 2)客户端程序实现 get 功能(从文件服务器取一远程文件存到本地客户 端)。注意:客户端和文件服务器不在同一台机器上。
 get [-h hostname] [-p portname] remote_filename local_filename 

> 

##五. 操作系统支持 

###什么叫虚拟机？什么叫虚拟化？举例说明。 

> 【虚拟机】
>
> 由于多处理器可以同时运行在一个硬件设备上，操作系统可以提供一个虚拟机，给用户一个系统控制的感觉。这包括保护每个用户进程避免其他进程的干扰。指通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统。
>
> 【虚拟化】
>
> 扩展或替换一个已有界面来模仿另一 个系统的行为。 
>
> 在分布式系统中的作用: –尽管硬件和底层系统软件变化较快，高层软件(中间件和应用程序)要稳定得多–通过让应用程序运行在自己的虚拟机上，从而减少平台和机器的种类，提供高度的移植性和灵活性。
>
> 例如：在单CPU多道分时系统中，通过多道程序技术和分时技术把一个物理CPU虚拟为多台逻辑上的CPU，使每个终端用户都认为有一台独立的CPU为它运行，用户感觉的CPU是虚拟CPU。
>
> ![image-20190702173638434](../../../../Library/Application Support/typora-user-images/image-20190702173638434.png)

###什么叫保护？举例说明。 

> （百度）
>
> 保护：保护是指一种控制程序、进程或用户对计算机系统资源进行访问的机制，通过保护资源来防止非法访问。操作系统中的进程必须加以保护，使其免受其他进程活动的干扰。为此，系统采用了各种机制确保只有从操作系统中获得了恰当授权的进程才可以操作相应的文件、内存段、CPU和其他的资源。
>
> 举例：
>
> 1. 没有文件读取权限的用户不能访问文件，而且应用程序进程也不能访问设备寄存器。
>
> 2. 为了防止文件共享可能会导致文件被破坏或未经核准的用户修改文件，文件系统必须控制用户对文件的存取，即解决对文件的读、写、执行的许可问题。为此，必须在文件系统中建立相应的文件保护机制。

###什么叫进程调度？什么叫线程调度？多线程并发处理？ 

> （百度百科）
>
> 【进程调度】：无论是在批处理系统还是分时系统中，用户进程数一般都多于处理机数、这将导致它们互相争夺处理机。另外，系统进程也同样需要使用处理机。这就要求进程调度程序按一定的策略，动态地把处理机分配给处于就绪队列中的某一个进程，以使之执行。
>
> 【线程调度】：计算机通常只有一个CPU,在任意时刻只能执行一条机器指令,每个线程只有获得CPU的使用权才能执行指令.所谓多线程的并发运行,其实是指从宏观上看,各个线程轮流获得CPU的使用权,分别执行各自的任务.在运行池中,会有多个处于就绪状态的线程在等待CPU,JAVA虚拟机的一项任务就是负责线程的调度,线程调度是指按照特定机制为多个线程分配CPU的使用权。
>
> 【多线程并发处理】：指从软件或者硬件上实现多个线程并发执行的技术。具有多线程能力的计算机因有硬件支持而能够在同一时间执行多于一个线程，进而提升整体处理性能。具有这种能力的系统包括对称多处理机、多核心处理器以及芯片级多处理或同时多线程处理器。 在一个程序中，这些独立运行的程序片段叫作“线程”，利用它编程的概念就叫作“多线程处理”。具有多线程能力的计算机因有硬件支持而能够在同一时间执行多于一个线程（台湾译作“执行绪”），进而提升整体处理性能。

###什么叫临界区？什么叫临界资源？如何解释线程同步？ 

> 【临界区】
>
> 临界区：指的是一个访问共用资源（例如：共用设备或是共用存储器）的程序片段，而这些共用资源又无法同时被多个线程访问的特性。当有线程进入临界区段时，其他线程或是进程必须等待（例如：boundedwaiting 等待法），有一些同步的机制必须在临界区段的进入点与离开点实现，以确保这些共用资源是被互斥获得使用。
>
> 【临界资源】
>
> 临界资源：一次仅允许一个进程使用的资源称为临界资源。
>
> 【线程同步】
>
> 在一般情况下，创建一个线程是不能提高程序的执行效率的，所以要创建多个线程。但是多个线程同时运行的时候可能调用线程函数，在多个线程同时对同一个内存地址进行写入，由于CPU时间调度上的问题，写入数据会被多次的覆盖，所以就要使线程同步。线程同步即当有一个线程在对内存进行操作时，其他线程都不可以对这个内存地址进行操作，直到该线程完成操作，其他线程才能对该内存地址进行操作，而其他线程又处于等待状态，目前实现线程同步的方法有很多，临界区对象就是其中一种。
>
> 1) 线程同步就是线程排队。同步就是排队。线程同步的目的就是避免线程“同步”执行。
>
> 2)只有共享资源的读写访问才需要同步。如果不是共享资源，那么就根本没有同步的必要。 
>
> 3)只有“变量”才需要同步访问。如果共享的资源是固定不变的，那么就相当于“常量”，线程同时读取常量也不需要同步。
>
> 4)多个线程访问共享资源的代码有可能是同一份代码，也有可能是不同的代码；论是否执行同一份代码，只要这些线程的代码访问同一份可变的共享资源，这些线程之间就需要同步。

###单处理机进程调度算法有哪些？如何描述？ 

> 



###影响远程调用的哪些因素会影响消息传递？ 

> 1. 请求-应答协议：将请求和应答进行匹配，提供传输保证
> 2. 消息标识符：是每个消息必须有的唯一身份，通过消息标识符才可以引用消息
> 3. 请求-应答协议的故障模型：
> 4. 超时：超时发生时，最简单的选择就理解返回给客户一个异常提示。
> 5. 丢弃重复的请求消息：请求消息重复传输时，服务器可能不止一次的接收到该消息。
> 6. 丢失应答消息：如果当服务器收到一个重复的请求消息时，已经发送了应答消息，那么除非他保存了原先执行的结果，否则它需要再次执行这个操作来货的结果。
> 7. 历史：对于要求重新传输应答，而不需要重新执行操作的服务来说，可以使用历史
> 8. 交互协议的类型：
> 9. 请求-应答协议的TCP流的使用
> 10. HTTP请求
> 11. 消息的内容



###举例说明在分布式环境下，什么是代码迁移？

> 代码迁移定义：将程序(或执行中的程序)传递到其它计算机。 两台不同机器之间的代码迁移主要是为了提高系统的性能，增加灵活性。当server和client的通信成本很高的时候，我们可以通过把服务器端的计算转移到客户端本地来，减少两边的通信。
>
> 进程迁移：就是将一个进程的状态，从一台机器(源机) 转移到另一台机器(目标机)上，从而使该进程能在目标 机上执行。 
>
> 【代码迁移动机】: 
>
> - 实现负载均衡 –将进程从负载重的系统迁移到负载轻的系统，从而改善整体性能 
>
> - 改善通信性能 
>   - 交互密集的进程可迁移到同一个节点执行以减少通信开销
>   - 当进程要处理的数据量较大时，最好将进程迁移到数据所在的节 点 
> - 可用性 –需长期运行的进程可能因为当前运行机器要关闭而需要迁移
> - 使用特殊功能 –可以充分利用特定节点上独有的硬件或软件功能  
>
> 【进程迁移的动机】
>
> 进程迁移在分布式操作系统中很重要，主要有以下几个原因:
>
> 1. 负载共享。通过将进程从负载较重的节点迁移到负载 较轻的节点，使系统负载达到平衡，从而提高整体执行 效率。 
>
> 2. 减少通信开销。可以将相互间紧密作用的进程迁移到 同一节点，以减少它们相互作用期间的通信耗费。 
>
> 3. 可获得性。运行时间较长的进程在出现错误时可能需 要迁移。那么，一个想继续的进程既可以迁移到另外的 系统，也可以推迟运行，待错误恢复后在当前系统中重 新开始。 
>
> 4. 利用特定资源。 

###举例说明在分布式环境下的处理器任务分配。比较与单处理机分配的不同？ 

> 分配算法的设计原则: 
>
> - 局部性算法和全局性算法
> - 发送者启动算法和接收者启动算法 • 确定性算法和启发性算法
> - 集中式算法和分布式算法
> - 最优化算法和次优化算法 
>
> 分配算法的实现问题：
>
> - 负载的度量
> - 额外消耗
> - 复杂性
> - 稳定性
>
> 【与单处理机分配的不同】
>
> **（来自百度，可能不靠谱**）
>
> 分布式环境下的任务分配问题是一类典型的组合优化问题。应用蚁群算法来解决多处理器分布式系统上的任务分配问题,一个任务只能分配给一个处理器处理,而一个处理器可以处理多个任务。
>
> 单处理机可以通过软件分配处理器运算资源，比如在一秒内同时分配给两个程序各0.5秒的运算时间，在没有可调用资源的时候，程序被中断，单处理机可以来回兼顾，但是每个任务的效率都只有二分之一。
>
> 分布式环境同样依赖程序的任务分配，大多数程序能调用多线程，他们同时为一个任务运行，并行运算可以在程序内部同时处理两个线程的工作，效率接近加倍。
>
> 单处理机从宏观上是同时为多个进程服务的，而实际上是轮流为每个进程服务一段时间片，由于处理机的高速高频率，因此我们从宏观上是看不出处理机轮流工作的。这是分时处理。分布式环境由于拥有多个核心，因此能够在同一时间为多个进程服务，并不像单核那样要轮流分配时间片。因此能够更好的工作。

##六. 同步化 

###什么是物理时钟的同步算法？

> 答：书 14.3（以下答案来自百度）
>
> 大多数实际的分布式系统是异步的，导致消息延迟的因素很多，当两个设备一起工作并对时间有精确要求的时候，就需要在他们之间进行同步。同步是基于在两个设备之间规定一个共同的时间参考。如果这两个设备没有进行同步，无论它们开始的时间多么一致，也会由于两台设备机械结构的差异而产生时间漂移。
>
> 为了实现分布系统的时间同步，有如下几种可行算法：
>
> 内部同步：
>
> 1）Cristian算法（逐步调整法）：用时间服务器进行时钟同步，将时间服务器连接到一个接收UTC信号的设备上，用于实现外部同步。在接收到请求后，服务器进程S根据他的时间提供时间。但是只有在客户和服务器之间的往返时间与所要求的精确性相比足够短，该方法才能达到同步。
>
> ![image-20190705153208196](../../../../Library/Application Support/typora-user-images/image-20190705153208196.png)
>
> 2）Berkeley算法（主动式方法）：这个算法的主要时间不同在于各个服务器是主动的将自己的时间报告给服务器，服务器告诉它需要如何调整。
>
> 算法如下：
>
> - 主机通过周期轮询从属机时间
> - 主机通过消息往返时间估算从属机时间，并计算容错平均值
> - 主机通知其他机器调整时间
>
> 3）平均值算法：
>
> - 划分固定时间间隔R; 
> - 在每个间隔，所有机器广播自己的时钟时间 
> - 启动本地计时器收集在S时间间隔中到达的 其他机器广播的时间 
> - 执行平均时间计算算法，得到新的时间值 
>
> 4）多重外部时间源法
>
> 外部同步：
>
> 1）网络时间协议（NTP）：定义了时间服务的体系结构和在互联网上发布时间信息的协议。NTP服务由互联网上的服务器网提供。
>
> NTP的同步模式：
>
> - 组播：用于高速LAN，准确度较低
> - 过程调用：类似Cristian算法的操作，准确的较低
> - 对称模式：可用于在LAN中提供时间信息的服务器和同步子网的较高层，保留时序类型，准确度最高。

###什么是基于逻辑时钟的同步算法？

> 答：（来自百度）
>
> 逻辑时钟是一种相对时间，比如“从整个系统启动到现在过了多久多久”这样的时钟，要求的是系统节点进程之间的相对一致性。
>
> 只有进行交互的进程才需要有逻辑时钟同步，同步的目的是维持时间的顺序性，除时间的基本特性外，与物理时钟之间没有通用意义上的明确的关系。
>
> 例如：a事件发生在b事件之前，记为a→b；消息的发送肯定在接受之前，记为send(m)→recv(m)；X→Y 和 Y→X都不成立，称为X || Y
>
> 同步算法：
>
> Lamport时钟
>
>  C(a)表示事件a的时钟值。性质:
>
> - if ab;则C(a)<C(b)
> - a,b C(a) C(b)
> - C是递增的
>
> 校正算法：
>
> - ab
> - if C(b)<C(a), 则C(b) = C(a) +1 

###如何进行一致性全局状态的检测？

> 14章 14.6.2   14.5
>
> ![image-20190705161409668](../../../../Library/Application Support/typora-user-images/image-20190705161409668.png)
>
> 全局状态指的是一个系统的执行情况。
>
> 全局状态的检测步骤：
>
> 1. 观察全局状态的必要性
>    - 分布式无用单元收集：如果分布式系统中不再对某个对象进行任何引用，那么该对象被认为是无用的，需要回收他所占的内存。
>    - 分布式死锁检测：死锁就是一组进程中的每个进程都在等待另一个进程给它发送消息，并且出现"等待"循环的现象。会导致系统进展终止。
>    - 分布式终止检测：即检测某一个分布式算法是否可以终止
>
> 2. 一致的全局状态 -- 对应于一致割集的状态
> 3. 走向
> 4. Chandy和Lamport的"快照"算法：为了捕获一致的全局状态

###什么是选举算法？

> 15章 15.3
>
> 选择一个唯一的进程来扮演特定角色的算法称为选举算法(来自书)。
>
> 作用：在分布式进程之间做出统一的决定。
>
> 如果一个进程采取行动启动了选举算法的一次运行，则称该进程召集选举。一个进程每次最多召集一次选举，但原则上N个进程可以并发召集N次选举。在任何时间点，进程pi可以是一个参与者，意指它参加选举算法的某次运行，也可以是非参与者，意指它当前没有参加任何选举。一个重要的要求是对当选进程的选择必须唯一，即使若干个进程并发地召集选举。不失一般性，我们要求选择具有最大的标识符的进程为当选进程。“标识符”可以是任何有用的值，只要标识符唯一且可按全序排序即可。
>
> 每个进程pi（i=1，2，…，N）有一个变量elected，用于包含当选进程的标识符。当进程第一次成为一次选举的参与者时，它把变量值置为特殊值“⊥”，表示该值还没有定义。
>
> 在算法的任何一次运行期间，满足：
>
> E1（安全性）：参与的进程pi有electedi=⊥，或electedi=P，其中P是在运行结束时具有最大标识符的非崩溃进程。
>
> E2（活性）：所有的进程pi都参与并且最终或者置electedi≠⊥，或者进程pi崩溃。
>
> 注意，可能有还不是参与者的进程pi，他的electedi上次当选进程的标识符。

###什么是互斥算法？

> 第15章 15.2
>
> 什么是互斥：如果一组进程共享一个或一组资源，那么访问这些资源时，常需要互斥来防止干扰并保证一致性，其他进程不允许对这资源操作。
>
> 互斥的基本要求如下：
>
> ME1：（安全性） 在临界区（CS）一次最多有一个进程可以执行。
>
> ME2：（活性） 进入和离开临界区的请求最终成功执行。隐含着既无死锁也无饥饿问题，
>
> ME3：（顺序） 如果一个进入CS的请求发生在先，那么进入CS时仍按此顺序。
>
> 如果一种解决方案用发生在先顺序来决定进入临界区的先后，并且如果所有请求都按发生在先建立联系，那么在有其他进程等待时，一个进程就不可能进入临界区多于一次。这种顺序也允许进程协调它们对临界区的访问。一个多线程的进程可以在一个线程等待进入临界区时，继续进行其他处理。在此期间，它可能给另一个进程发消息，该进程因此也试图进入临界区。ME3指定第一个进程在第二个进程之前被准予进入临界区。（来自书）
>
> 集中式算法：有一个协调者：确定那个进程可以进入临界区
>
> 分布式算法：
>
> 令牌环算法：构造一个逻辑环，得到令牌的才可进入临界区
>
> ![image-20190705170652752](../../../../Library/Application Support/typora-user-images/image-20190705170652752.png)

###如何进行分布式系统的死锁处理？

> 第16章 16.4	第17章 17.5
>
> 死锁解决策略 
>
> - 鸵鸟法：留给用户考虑 
> - 检测法：发现死锁，进行处理 
> - 预防法：在设计上使死锁不可能发生 
> - 避免法：在运行中，防止出现死锁 
>   -  银行家算法[Dijkstra,1965]
>   - P<has,max>, free 

##七. 分布式文件系统*(选做——思考题) 

###分布式文件系统的特点与需求是什么？ 

> 文件系统负责文件的组织、存储、检索、命名、共享和保护。
>
> **特点** ：
>
> 1. 它提供了描述文件抽象的程序接口，这样，程序员就不必关心存储分配以及存储布局的细节。
> 2. 文件包括数据和属性
> 3. 文件系统用来存储和管理大量的文件，具有创建、命名和删除文件的功能
> 4. 负责文件的访问控制
>
> 需求：
>
> 1. 透明性：
>    - 访问透明性：用相同的文件操作访问本地资源和远程资源（本地或远程）；
>    - 位置透明性：用户程序看到的是一个统一的文件名空间。文件或者文件组可以重新部署，无需改变他们的路径名称
>    - 移动透明性：当文件被移动后，用户程序和用户节点的系统管理员表均不需要改变
>    - 性能透明性：负载变化时，系统能够被重新配置以提高性能
>    - 伸缩透明性：文件服务可以不断扩充，来满足负载和网络规模增长的需要
> 2. 并发文件更新：客户改变文件的操作不应该影响其他客户同时进行的访问和改变同一文件的操作
> 3. 文件复制：在支持文件复制的文件服务中，一个文件可以表示为其内容在不同位置的多个拷贝
> 4. 硬件和操作系统异构性：文件服务的接口必须有明确定义，保证在不同操作系统和计算机上可以实现同样的客户和服务器软件
> 5. 容错：为了应付暂时的通信故障
> 6. 一致性：像UNIX文件系统这样，提供单个拷贝更新的语义，避免有可能导致的一定程序上偏离单个拷贝语义。
> 7. 安全性：对客户的请求加以认证，来保护请求和应答消息。
> 8. 效率：分布式文件系统应该提供至少和传统文件系统相同的能力。

###Sun 网络文件系统(NFS)的自动安装器是如何改进 NFS 的性能和可伸缩性的？

> 1. 为了将NFS推广为一个标准，Sun公司公开了NFS主要的接口定义，允许其他供货商来产生实现，同时通过授权的方式允许其他计算机供货商获得参考时限的源码
> 2. NFS为运行在UNIX和其他系统上的客户程序提供对远程文件的透明性访问
> 3. NFS对硬件和操作系统异构性实现高层支持 

##八. 分布式系统前沿与案例分析(+ 聂慧静老师) 

###什么是大数据？什么是云平台？举例说明它们的关系。 

> 答：（来自百度）
>
> **大数据** - 研究机构Gartner给出了这样的定义。“大数据”是需要新处理模式才能具有更强的决策力、洞察发现力和流程优化能力来适应海量、高增长率和多样化的信息资产。
>
> 麦肯锡全球研究所给出的定义是：一种规模大到在获取、存储、管理、分析方面大大超出了传统数据库软件工具能力范围的数据集合，具有海量的数据规模、快速的数据流转、多样的数据类型和价值密度低四大特征。
>
> **云平台** - 提供基于“云”的服务，供开发者创建应用时采用。可以划分为3类：以数据存储为主的存储型云平台，以数据处理为主的计算型云平台以及计算和数据存储处理兼顾的综合云计算平台。
>
> **关系** - 从技术上看，大数据与云计算的关系就像一枚硬币的正反面一样密不可分。大数据必然无法用单台的计算机进行处理，必须采用分布式架构。它的特色在于对海量数据进行分布式数据挖掘。但它必须依托云计算的分布式处理、分布式数据库和云存储、虚拟化技术。
>
> 随着云时代的来临，大数据也吸引了越来越多的关注。分析师团队认为，大数据通常用来形容一个公司创造的大量非结构化数据和半结构化数据，这些数据在下载到关系型数据库用于分析时会花费过多时间和金钱。大数据分析常和云计算联系到一起，因为实时的大型数据集分析需要像MapReduce一样的框架来向数十、数百或甚至数千的电脑分配工作。
>
> 大数据需要特殊的技术，以有效地处理大量的容忍经过时间内的数据。适用于大数据的技术，包括大规模并行处理（MPP）数据库、数据挖掘、分布式文件系统、分布式数据库、云计算平台、互联网和可扩展的存储系统。

###什么是网格？网格平台与云平台的联系与区别？ 

> 答：（来自课件）
>
> **网格**是信息社会的网络基础设施，它把整个因特网整合成一台巨大的超级虚拟计算机，实现互联网上所有资源的互联互通，完成计算资源、存储资源、通信资源、软件资源、信息资源、知识资源等智能共享的一种新兴的技术。
>
> **联系与区别** - 云计算和网格彼此相关，但又有不同。网格计算强调资源共享，任何人都可以做为请求者使用其它节点的资源，任何人都需要贡献一定资源给其他节点。网
>
> 格计算强调将工作量转移到远程的可用计算资源上。云计算强调专有，任何人都可以获取自己的专有资源，并且这些资源是由少数团体提供的，使用者不需要贡献自己的资源。在云计算中，计算资源被转换形式去适应工作负载，它支持网格类型应用，也支持非网格环境，比如运行传统或Web2.0应用的三层网络架构。网格计算侧重并行的计算集中性需求，并且难以自动扩展。云计算侧重事务性应用，大量的单独的请求，可以实现自动或半自动的扩展。

##案例分析题，以保险公司案例为背景回答下列问题: 

###传统BI的关键技术包括哪些，分别详细描述。 

> ![image-20190705180628574](../../../../Library/Application Support/typora-user-images/image-20190705180628574.png)
>
> 传统BI的关键技术主要包括：
>
> 1. **ETL****(**数据的提取、转换与加载**)** 
>
>    •在构造数据仓库时，要经过数据的清洗、数据的抽取转换、 数据集成和数据加载等过程。面向不同的需求，对数据进行 清洗以保证数据的正确性，然后对数据进行抽取，转换成数 据仓库所需形式，并实现加载到数据仓库。 
>
> 2. **联机分析处理****(****简称****OLAP)** 
>
>    •又称多维分析，对数据仓库中的数据进行多维分析和展现，是使分析人 员、管理人员或执行人员能够从多种角度对从原始数据中转化出来的真实 反映企业维特性的信息进行快速、一致、交互地存取，从而获得对数据更 深入了解的一类软件技术。它的技术核心是“维”这个概念，因此OLAP 也可以说是多维数据分析工具的集合。 
>
> 3. **数据仓库建模** 
>
>    •数据仓库的数据模型有星型模式、雪花模式。 •星型模式最为常见，有一个包含大批数据并且不含冗余的中心表， 每维一组小的附属表。 •雪花模式中某些维表是规范化的，因而把数据进一步分解到附加 的表中，模式图形成了类似雪花的形状。 
>
> 4. **数据的发布与表示技术** 
>
>    •为了使分析后的数据直观、简练地呈现在用户面前， 通常采用的是一些查询和报表工具和信息可视化技术。 所谓信息可视化是指以图形、图像、虚拟现实等易为人 们所辨识的方式展现原始数据间的复杂关系、潜在信息 以及发展趋势，以便我们能够更好地利用所掌握的信息 资源 

### 描述一下保险行业大数据四层架构，大数据在保险行业的应用场景有哪些，选择一个案例详细描述。 

> ![image-20190705180745250](../../../../Library/Application Support/typora-user-images/image-20190705180745250.png)
>
> ![image-20190705180810823](../../../../Library/Application Support/typora-user-images/image-20190705180810823.png)
>
> ![image-20190705181849289](../../../../Library/Application Support/typora-user-images/image-20190705181849289.png)
>
> 四层架构：
>
> 1. 基础设施数据源
>
>    **适配保险领域数据**
>
>    • 中保信行业数据接入
>    • 医疗行业数据数据接入
>    • 用户行为数据接入
>
> 2. 数据平台层
>
>    **统一大数据平台**
>
>    • 统一的数据集成，存储和分析
>    • 统一的数据治理
>    • 统一的应用支持平台
>
> 3. 数据服务层
>
>    **开放架构**
>
>    • 水平分层解耦架构
>     • 整合第三方组件的能力 如:DB、 
>
>    DWH，Hadoop、 分析工具、 可 视化软件
>
> 4. 应用层
>
>    **保险行业驱动的应用**
>
>    • 挖掘新客户
>    • 精准二次营销
>    • 智能核保
>    • 风险预警
>
> （？存储层、资源及数据管理层、计算引擎、基于计算引擎的高级封装及工具？）
>
> 目前，保险业对大数据的应用主要集中在两个方向:
>
> 1. 利用大数据对客户进行精准画像、客户细分，以便更快速、更深入地服务客户的保险需求，同时，根据不同客户的不同风险情况，进行更个性化、更精准的产品设计和定价，向不同需求的客户提供不同的产品组合;
>
> 2. 利用大数据优化核保、理赔等业务过程，同时，跟踪评估客户在保单全生命周期的风险，为反欺诈、反洗钱支持。 

###描述云服务架构的三个层次分别是什么？保险企业一般重点开发建设 的是哪个层次的云架构？ 

> ![image-20190705182444384](../../../../Library/Application Support/typora-user-images/image-20190705182444384.png)
>
> 云服务框架的三个层次：
>
> 1. 基础架构云IaaS
>
>    IaaS 基础设施即服务 (Infrastructure-as-a-Service) 
>
>    •拥有了IaaS，就可以将引荐外 包到别的地方去。IaaS会提供 场外服务器，存储和网络硬件， 也可以选择租用。节省了维护成 本和办公场地，公司可以在任何 时候利用这些硬件来运行其应用 。 
>
>    •目前比较知名的IaaS公司有亚 马逊、Bluelock、CSC、 GoGrid、IBM等。 
>
> 2. 应用平台云PaaS
>
>    •PaaS 软件即服务(Platform-as-a-Service)
>
>    -某些时候也被叫作中间件。所有的开发都可以在这一层进行，节省时间与资源。PaaS可以提供各种开发和分发应用的解决方案，比如虚拟服务器和操作系统等，可以节省硬件上的费用。
>    •PaaS公司与IaaS公司有许多重叠，除了上面列出的那些之外，
>    还有Google、Microsoft Azure、Force.com、,Heroku、Engine Yard等。
>
> 3. 业务服务云SaaS
>
>    •SaaS软件即服务 
>
>    (Software-as-a-Service) •SaaS是我们目前普通用户接触 最多的层面，在网络上任意一个 远程服务器上的应用都是属于 SaaS。 •比如现在阿里的钉钉、JIBUU 以及苹果的iCloud都属于这一类 。比较知名的SaaS公司有 Salesforce、workday、Slack等 
>
> 重点开发：
>
> 总的来说，IaaS、PaaS和SaaS就是云服务提供的三种层次，最基础的是IaaS，中间的为PaaS，最后直观呈现出来的是SaaS。
> •目前对于保险企业来说，主要建设的是PaaS云平台。

###分布式系统中，手机端应用案例的后台架构图中，有哪些关键模块，分别的作用是什么？ 

> ![image-20190705180446231](../../../../Library/Application Support/typora-user-images/image-20190705180446231.png)

